<Page
    x:Class="card_game_DSI.Board"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:card_game_DSI"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="#abd2ab">

    <Page.Resources>

        <DataTemplate x:Key="myCard" x:DataType="local:Card">
            <Grid Height="175"
                  Width="125"
                  Margin="10">

                <Image Stretch="UniformToFill" Source="{x:Bind cardPicture}"
                       VerticalAlignment="Center"/>
            </Grid>

        </DataTemplate>

    </Page.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="25*"/>
            <ColumnDefinition Width="50*"/>
            <ColumnDefinition Width="25*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="30*"/>
            <RowDefinition Height="30*"/>
            <RowDefinition Height="40*"/>
        </Grid.RowDefinitions>

        <!--Back button-->
        <StackPanel Orientation="Horizontal"
                    VerticalAlignment="Top">
            <Button Click="BackButton_OnClick" Foreground="Black">
                <SymbolIcon Symbol="Back"/>
            </Button>
            <TextBlock Text="ESC"
                       VerticalAlignment="Center"
                       Foreground="Black"/>
        </StackPanel>

        <!--Balanza-->
        <Image Grid.Row="0"
               Grid.Column="0"
               Source="/Assets/scale.png" 
               Height="250" 
               Width="250" 
               HorizontalAlignment="Center" />

        <Image Grid.Row="1"
               Grid.Column="0"
               Source="/Assets/bell.png" 
               Height="150" 
               Width="150" 
               HorizontalAlignment="Center" />

        <!--Cartas adversario-->
        <GridView
        x:Name="BoardGridView"
        Grid.Row="0" 
        Grid.Column="1" 
        ItemsSource= "{x:Bind boardCards}"
        ItemTemplate="{StaticResource myCard}"
        IsItemClickEnabled="True"
        ItemClick="BasicGridView_ItemClick"
        SelectionMode="Single"/>

        <!--Cartas jugador-->
        <Grid Grid.Row="1" Grid.Column="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="25*"/>
                <ColumnDefinition Width="25*"/>
                <ColumnDefinition Width="25*"/>
                <ColumnDefinition Width="25*"/>
            </Grid.ColumnDefinitions>

            <ScrollViewer   x:Name="Card1"
                            Grid.Column="0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            AllowDrop="True"
                            DragOver="Card_DragOver"
                            Drop="Card1_Drop">
                <Grid>
                    <Canvas AllowDrop="True"
                            DragOver="Card_DragOver"
                            Drop="Card1_Drop">

                        <GridView x:Name="MiCarta1"
                                    ItemsSource= "{x:Bind card1}"
                                    ItemTemplate="{StaticResource myCard}"
                                    IsItemClickEnabled="True"
                                    ItemClick="BasicGridView_ItemClick"
                                    SelectionMode="Single"/>
                    </Canvas>
                </Grid>
            </ScrollViewer>

            <ScrollViewer   x:Name="Card2"
                            Grid.Column="1"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            AllowDrop="True"
                            DragOver="Card_DragOver"
                            Drop="Card2_Drop">
                <Grid>
                    <Canvas AllowDrop="True"
                            DragOver="Card_DragOver"
                            Drop="Card2_Drop">

                        <GridView x:Name="MiCarta2"
                                    ItemsSource= "{x:Bind card2}"
                                    ItemTemplate="{StaticResource myCard}"
                                    IsItemClickEnabled="True"
                                    ItemClick="BasicGridView_ItemClick"
                                    SelectionMode="Single"/>
                    </Canvas>
                </Grid>
            </ScrollViewer>

            <ScrollViewer   x:Name="Card3"
                            Grid.Column="2"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            AllowDrop="True"
                            DragOver="Card_DragOver"
                            Drop="Card3_Drop">
                <Grid>
                    <Canvas AllowDrop="True"
                            DragOver="Card_DragOver"
                            Drop="Card3_Drop">

                        <GridView x:Name="MiCarta3"
                                    ItemsSource= "{x:Bind card3}"
                                    ItemTemplate="{StaticResource myCard}"
                                    IsItemClickEnabled="True"
                                    ItemClick="BasicGridView_ItemClick"
                                    SelectionMode="Single"/>
                    </Canvas>
                </Grid>
            </ScrollViewer>

            <ScrollViewer   x:Name="Card4"
                            Grid.Column="3"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            AllowDrop="True"
                            DragOver="Card_DragOver"
                            Drop="Card4_Drop">
                <Grid>
                    <Canvas Grid.Row="0"                 
                            AllowDrop="True"
                            DragOver="Card_DragOver"
                            Drop="Card4_Drop">

                        <GridView x:Name="MiCarta4"
                                    Grid.Row="0" 
                                    ItemsSource= "{x:Bind card4}"
                                    ItemTemplate="{StaticResource myCard}"
                                    IsItemClickEnabled="True"
                                    ItemClick="BasicGridView_ItemClick"
                                    SelectionMode="Single"/>
                    </Canvas>
                </Grid>
            </ScrollViewer>

        </Grid>

        <!--Cartas mano del jugador-->
        <GridView
        x:Name="HandGridView"
        Grid.Row="2" 
        Grid.Column="1" 
        VerticalAlignment="Bottom"
        ItemsSource= "{x:Bind handCards}"
        ItemTemplate="{StaticResource myCard}"
        IsItemClickEnabled="True"
        ItemClick="BasicGridView_ItemClick"
        SelectionMode="Single"
        CanDragItems="True"
        DragItemsStarting="HandGridView_DragItemsStarting"/>

    </Grid>
</Page>
